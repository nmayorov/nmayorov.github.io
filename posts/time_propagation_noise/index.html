<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Noisy input in state time propagation: "control" vs. "navigation" | Navigating Uncertainty</title>
<meta name=keywords content><meta name=description content="In this note I want to show that there are two possible scenarios how noisy input can influence state time propagation in estimation problems. This is not well articulated in classical literature and may create confusion when applying estimation algorithms to practical systems.
I will illustrate the concept on a simple example. Consider a robot which can move in the direction of its longitudinal axis and rotate. Its state is described by 4 variables (2D case):"><meta name=author content="Nikolay Mayorov"><link rel=canonical href=https://nmayorov.github.io/posts/time_propagation_noise/><link crossorigin=anonymous href=/assets/css/stylesheet.21e7558a953920031f5c62b4db91512093af342ec251fdf4bc1be327b0e259b4.css integrity="sha256-IedVipU5IAMfXGK025FRIJOvNC7CUf30vBvjJ7DiWbQ=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://nmayorov.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nmayorov.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nmayorov.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://nmayorov.github.io/apple-touch-icon.png><link rel=mask-icon href=https://nmayorov.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})'></script><meta property="og:title" content="Noisy input in state time propagation: &#34;control&#34; vs. &#34;navigation&#34;"><meta property="og:description" content="In this note I want to show that there are two possible scenarios how noisy input can influence state time propagation in estimation problems. This is not well articulated in classical literature and may create confusion when applying estimation algorithms to practical systems.
I will illustrate the concept on a simple example. Consider a robot which can move in the direction of its longitudinal axis and rotate. Its state is described by 4 variables (2D case):"><meta property="og:type" content="article"><meta property="og:url" content="https://nmayorov.github.io/posts/time_propagation_noise/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-10T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-10T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Noisy input in state time propagation: &#34;control&#34; vs. &#34;navigation&#34;"><meta name=twitter:description content="In this note I want to show that there are two possible scenarios how noisy input can influence state time propagation in estimation problems. This is not well articulated in classical literature and may create confusion when applying estimation algorithms to practical systems.
I will illustrate the concept on a simple example. Consider a robot which can move in the direction of its longitudinal axis and rotate. Its state is described by 4 variables (2D case):"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nmayorov.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Noisy input in state time propagation: \"control\" vs. \"navigation\"","item":"https://nmayorov.github.io/posts/time_propagation_noise/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Noisy input in state time propagation: \"control\" vs. \"navigation\"","name":"Noisy input in state time propagation: \u0022control\u0022 vs. \u0022navigation\u0022","description":"In this note I want to show that there are two possible scenarios how noisy input can influence state time propagation in estimation problems. This is not well articulated in classical literature and may create confusion when applying estimation algorithms to practical systems.\nI will illustrate the concept on a simple example. Consider a robot which can move in the direction of its longitudinal axis and rotate. Its state is described by 4 variables (2D case):","keywords":[],"articleBody":"In this note I want to show that there are two possible scenarios how noisy input can influence state time propagation in estimation problems. This is not well articulated in classical literature and may create confusion when applying estimation algorithms to practical systems.\nI will illustrate the concept on a simple example. Consider a robot which can move in the direction of its longitudinal axis and rotate. Its state is described by 4 variables (2D case):\n$x, y$ – euclidean coordinates in a selected global frame of reference $v$ – velocity along the longitudinal axis $\\psi$ – heading angle relative to the global frame of reference The state variables follow the differential equations: $$ \\dot{x} = v \\cos \\psi \\\\ \\dot{y} = v \\sin \\psi \\\\ \\dot{v} = a \\\\ \\dot{\\psi} = \\omega $$ Where $a$ and $\\omega$ are acceleration and angular rate respectively.\nNow consider two possible scenarios.\nControl scenario In this scenario required control signals $a(t)$ and $\\omega(t)$ are determined before the mission, but they are executed imperfectly by the robot as $$ \\tilde{a} = a + w_a \\\\ \\tilde{\\omega} = \\omega + w_\\omega $$ where $w_a$ and $w_\\omega$ are random disturbances of acceleration and angular rate respectively.\nThe true state variables are stochastic and obey the equations with disturbed acceleration and angular rate: $$ \\dot{x} = v \\cos \\psi \\\\ \\dot{y} = v \\sin \\psi \\\\ \\dot{v} = \\tilde{a}\\\\ \\dot{\\psi} = \\tilde{\\omega} $$\nAn estimation algorithm (like Extended Kalman Filter) executes the time propagation equations with nominal acceleration ang angular rate: $$ \\dot{\\hat{x}} = \\hat{v} \\cos \\hat{\\psi} \\\\ \\dot{\\hat{y}} = \\hat{v} \\sin \\hat{\\psi} \\\\ \\dot{\\hat{v}} = a \\\\ \\dot{\\hat{\\psi}} = \\omega $$ where $\\hat{\\cdot}$ denotes estimate of the corresponding variable.\nHere we have that the actual motion of the robot is stochastic and the estimation equations are deterministic. This is how estimation problems and algorithms are usually formulated in literature.\nNavigation scenario In this scenario the control signals to the robot are not set (it can be controlled by an operator, for example), but acceleration and angular rate are measured by sensors installed on the robot as $$ \\tilde{a} = a + w_a \\\\ \\tilde{\\omega} = \\omega + w_\\omega $$ where $w_a$ and $w_\\omega$ are random measurement noise of acceleration and angular rate respectively.\nThe true state variables are unknown but deterministic and obey the equations with true acceleration and angular rate: $$ \\dot{x} = v \\cos \\psi \\\\ \\dot{y} = v \\sin \\psi \\\\ \\dot{v} = a\\\\ \\dot{\\psi} = \\omega $$\nAn estimation algorithm executes the time propagation equations with measured acceleration and angular rate: $$ \\dot{\\hat{x}} = \\hat{v} \\cos \\hat{\\psi} \\\\ \\dot{\\hat{y}} = \\hat{v} \\sin \\hat{\\psi} \\\\ \\dot{\\hat{v}} = \\tilde{a} \\\\ \\dot{\\hat{\\psi}} = \\tilde{\\omega} $$\nHere we have that the actual motion of the robot is deterministic and the estimation equations are stochastic. This situation occurs when the noisy measurements are used in the estimate time propagation equations. An important example is a strapdown Inertial Navigation System (INS), where noisy measurements of gyros and accelerometers are used to propagate the system state estimate (i. e. position, velocity and attitude). Our example in this section can be though of as a simplified INS.\nGeneral treatment and consequences on estimation algorithms design Let’s write the state and estimate propagation equations in a general form for a state vector $x$ with a noise vector $w$.\nFor the control scenario: $$ \\dot{x} = f(x, w) \\\\ \\dot{\\hat{x}} = f(\\hat{x}, 0) $$ For the navigation scenario: $$ \\dot{x} = f(x, 0) \\\\ \\dot{\\hat{x}} = f(\\hat{x}, w) $$\nConsider the error of the estimate: $$ \\Delta x = \\hat{x} - x $$ In both scenarios an estimation algorithm is sought to be unbiased with the minimal error variance: $$ \\operatorname{E} \\Delta x = 0 \\text{ and } \\operatorname{E} (\\Delta x)^T \\Delta x \\text{ is minimal} $$ A linearized differential equation for the error can be obtained by subtracting the state propagation equations from the estimate propagation equations and linearizing: $$ \\Delta \\dot{x} = F(x) \\Delta x \\pm G(x) w \\\\ \\text{with } F(x) = \\frac{\\partial f(x)}{\\partial x} \\text{ and } G(x) = \\frac{\\partial f(x)}{\\partial w} $$ Plus and minus are used for navigation and control scenarios respectively. Considering that $w$ is usually modelled as a zero mean noise, this difference is not substantial.\nWith the assumption that $w$ is a zero mean white noise, the equation for the error covariance time propagation is the same in both scenarios: $$ \\dot{P} = F P F^T + G Q G^T $$ where $Q$ is power spectral density matrix of the noise $w$.\nWe can see that there is no difference in estimation algorithms design besides whether noisy input is used in the estimate time propagation («navigation scenario») or not («control scenario»).\nMixed scenarios are possible too – with a conceptual understanding of the subject it’s not difficult to properly design and reason about estimation algorithms in such cases too. One interesting example is a gimbaled INS where accelerometers are kept horizontal on a gyro-stabilized platform.\nConclusion I’ve highlighted that in estimation problems a noisy input can influence the true state time propagation or the state estimate time propagation. It doesn’t change an estimation algorithm’s objective or implementation logic, but it is useful to keep that in mind for clear intuitive engineering understanding of estimation theory and algorithms. Without understanding this point one can get a bit stuck when trying to design an estimation algorithm for a system like INS, where noisy measurements are used for the state estimate propagation.\n","wordCount":"916","inLanguage":"en","datePublished":"2022-12-10T00:00:00Z","dateModified":"2022-12-10T00:00:00Z","author":{"@type":"Person","name":"Nikolay Mayorov"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nmayorov.github.io/posts/time_propagation_noise/"},"publisher":{"@type":"Organization","name":"Navigating Uncertainty","logo":{"@type":"ImageObject","url":"https://nmayorov.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nmayorov.github.io accesskey=h title="Navigating Uncertainty (Alt + H)">Navigating Uncertainty</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nmayorov.github.io/archives title="All posts"><span>All posts</span></a></li><li><a href=https://nmayorov.github.io/tags title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://nmayorov.github.io>Home</a>&nbsp;»&nbsp;<a href=https://nmayorov.github.io/posts/>Posts</a></div><h1 class=post-title>Noisy input in state time propagation: "control" vs. "navigation"</h1><div class=post-meta>&lt;span title='2022-12-10 00:00:00 +0000 UTC'>December 10, 2022&lt;/span>&amp;nbsp;·&amp;nbsp;5 min&amp;nbsp;·&amp;nbsp;Nikolay Mayorov</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#control-scenario aria-label="Control scenario">Control scenario</a></li><li><a href=#navigation-scenario aria-label="Navigation scenario">Navigation scenario</a></li><li><a href=#general-treatment-and-consequences-on-estimation-algorithms-design aria-label="General treatment and consequences on estimation algorithms design">General treatment and consequences on estimation algorithms design</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><p>In this note I want to show that there are two possible scenarios how noisy input can influence state time propagation in estimation problems.
This is not well articulated in classical literature and may create confusion when applying estimation algorithms to practical systems.</p><p>I will illustrate the concept on a simple example.
Consider a robot which can move in the direction of its longitudinal axis and rotate.
Its state is described by 4 variables (2D case):</p><ul><li>$x, y$ &ndash; euclidean coordinates in a selected global frame of reference</li><li>$v$ &ndash; velocity along the longitudinal axis</li><li>$\psi$ &ndash; heading angle relative to the global frame of reference</li></ul><p>The state variables follow the differential equations:
$$
\dot{x} = v \cos \psi \\
\dot{y} = v \sin \psi \\
\dot{v} = a \\
\dot{\psi} = \omega
$$
Where $a$ and $\omega$ are acceleration and angular rate respectively.</p><p>Now consider two possible scenarios.</p><h1 id=control-scenario>Control scenario<a hidden class=anchor aria-hidden=true href=#control-scenario>#</a></h1><p>In this scenario required control signals $a(t)$ and $\omega(t)$ are determined before the mission, but they are executed imperfectly by the robot as
$$
\tilde{a} = a + w_a \\
\tilde{\omega} = \omega + w_\omega
$$
where $w_a$ and $w_\omega$ are random disturbances of acceleration and angular rate respectively.</p><p>The true state variables are stochastic and obey the equations with disturbed acceleration and angular rate:
$$
\dot{x} = v \cos \psi \\
\dot{y} = v \sin \psi \\
\dot{v} = \tilde{a}\\
\dot{\psi} = \tilde{\omega}
$$</p><p>An estimation algorithm (like Extended Kalman Filter) executes the time propagation equations with nominal acceleration ang angular rate:
$$
\dot{\hat{x}} = \hat{v} \cos \hat{\psi} \\
\dot{\hat{y}} = \hat{v} \sin \hat{\psi} \\
\dot{\hat{v}} = a \\
\dot{\hat{\psi}} = \omega
$$
where $\hat{\cdot}$ denotes estimate of the corresponding variable.</p><p>Here we have that the actual motion of the robot is stochastic and the estimation equations are deterministic.
This is how estimation problems and algorithms are usually formulated in literature.</p><h1 id=navigation-scenario>Navigation scenario<a hidden class=anchor aria-hidden=true href=#navigation-scenario>#</a></h1><p>In this scenario the control signals to the robot are not set (it can be controlled by an operator, for example), but acceleration and angular rate are measured by sensors installed on the robot as
$$
\tilde{a} = a + w_a \\
\tilde{\omega} = \omega + w_\omega
$$
where $w_a$ and $w_\omega$ are random measurement noise of acceleration and angular rate respectively.</p><p>The true state variables are unknown but deterministic and obey the equations with true acceleration and angular rate:
$$
\dot{x} = v \cos \psi \\
\dot{y} = v \sin \psi \\
\dot{v} = a\\
\dot{\psi} = \omega
$$</p><p>An estimation algorithm executes the time propagation equations with measured acceleration and angular rate:
$$
\dot{\hat{x}} = \hat{v} \cos \hat{\psi} \\
\dot{\hat{y}} = \hat{v} \sin \hat{\psi} \\
\dot{\hat{v}} = \tilde{a} \\
\dot{\hat{\psi}} = \tilde{\omega}
$$</p><p>Here we have that the actual motion of the robot is deterministic and the estimation equations are stochastic.
This situation occurs when the noisy measurements are used in the estimate time propagation equations.
An important example is a strapdown Inertial Navigation System (INS), where noisy measurements of gyros and accelerometers are used to propagate the system state estimate (i. e. position, velocity and attitude).
Our example in this section can be though of as a simplified INS.</p><h1 id=general-treatment-and-consequences-on-estimation-algorithms-design>General treatment and consequences on estimation algorithms design<a hidden class=anchor aria-hidden=true href=#general-treatment-and-consequences-on-estimation-algorithms-design>#</a></h1><p>Let&rsquo;s write the state and estimate propagation equations in a general form for a state vector $x$ with a noise vector $w$.</p><p>For the control scenario:
$$
\dot{x} = f(x, w) \\
\dot{\hat{x}} = f(\hat{x}, 0)
$$
For the navigation scenario:
$$
\dot{x} = f(x, 0) \\
\dot{\hat{x}} = f(\hat{x}, w)
$$</p><p>Consider the error of the estimate:
$$
\Delta x = \hat{x} - x
$$
In both scenarios an estimation algorithm is sought to be unbiased with the minimal error variance:
$$
\operatorname{E} \Delta x = 0 \text{ and } \operatorname{E} (\Delta x)^T \Delta x \text{ is minimal}
$$
A linearized differential equation for the error can be obtained by subtracting the state propagation equations from the estimate propagation equations and linearizing:
$$
\Delta \dot{x} = F(x) \Delta x \pm G(x) w \\
\text{with } F(x) = \frac{\partial f(x)}{\partial x} \text{ and } G(x) = \frac{\partial f(x)}{\partial w}
$$
Plus and minus are used for navigation and control scenarios respectively.
Considering that $w$ is usually modelled as a zero mean noise, this difference is not substantial.</p><p>With the assumption that $w$ is a zero mean white noise, the equation for the error covariance time propagation is the same in both scenarios:
$$
\dot{P} = F P F^T + G Q G^T
$$
where $Q$ is power spectral density matrix of the noise $w$.</p><p>We can see that there is no difference in estimation algorithms design besides whether noisy input is used in the estimate time propagation (&#171;navigation scenario&#187;) or not (&#171;control scenario&#187;).</p><p>Mixed scenarios are possible too &ndash; with a conceptual understanding of the subject it&rsquo;s not difficult to properly design and reason about estimation algorithms in such cases too.
One interesting example is a gimbaled INS where accelerometers are kept horizontal on a gyro-stabilized platform.</p><h1 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h1><p>I&rsquo;ve highlighted that in estimation problems a noisy input can influence the true state time propagation or the state estimate time propagation.
It doesn&rsquo;t change an estimation algorithm&rsquo;s objective or implementation logic, but it is useful to keep that in mind for clear intuitive engineering understanding of estimation theory and algorithms.
Without understanding this point one can get a bit stuck when trying to design an estimation algorithm for a system like INS, where noisy measurements are used for the state estimate propagation.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://nmayorov.github.io>Navigating Uncertainty</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>