<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Heading observability in Inertial Navigation Systems | Navigating Uncertainty</title>
<meta name=keywords content><meta name=description content="It&rsquo;s generally known that the heading angle in Inertial Navigation Systems (INS) is observable when the system undergoes acceleration (including turns at nonzero velocity). However if we look at the &ldquo;modified error model&rdquo;, it may seem that merely significantly nonzero constant velocity is sufficient. Here I want to figure out this subject using formal observability criteria and then give it intuitive physical explanation.
INS equations in 2 dimensions To investigate heading observability, a simplified version of INS for a 2-dimensional motion is fully sufficient."><meta name=author content="Nikolay Mayorov"><link rel=canonical href=https://nmayorov.github.io/posts/ins_heading_observability/><link crossorigin=anonymous href=/assets/css/stylesheet.a801c217e3c96db9c9df36cb1d2216a9bc5d9fa77b72e2afcdf47fb847f8f015.css integrity="sha256-qAHCF+PJbbnJ3zbLHSIWqbxdn6d7cuKvzfR/uEf48BU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://nmayorov.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nmayorov.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nmayorov.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://nmayorov.github.io/apple-touch-icon.png><link rel=mask-icon href=https://nmayorov.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})'></script><meta property="og:title" content="Heading observability in Inertial Navigation Systems"><meta property="og:description" content="It&rsquo;s generally known that the heading angle in Inertial Navigation Systems (INS) is observable when the system undergoes acceleration (including turns at nonzero velocity). However if we look at the &ldquo;modified error model&rdquo;, it may seem that merely significantly nonzero constant velocity is sufficient. Here I want to figure out this subject using formal observability criteria and then give it intuitive physical explanation.
INS equations in 2 dimensions To investigate heading observability, a simplified version of INS for a 2-dimensional motion is fully sufficient."><meta property="og:type" content="article"><meta property="og:url" content="https://nmayorov.github.io/posts/ins_heading_observability/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-02T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-02T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Heading observability in Inertial Navigation Systems"><meta name=twitter:description content="It&rsquo;s generally known that the heading angle in Inertial Navigation Systems (INS) is observable when the system undergoes acceleration (including turns at nonzero velocity). However if we look at the &ldquo;modified error model&rdquo;, it may seem that merely significantly nonzero constant velocity is sufficient. Here I want to figure out this subject using formal observability criteria and then give it intuitive physical explanation.
INS equations in 2 dimensions To investigate heading observability, a simplified version of INS for a 2-dimensional motion is fully sufficient."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nmayorov.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Heading observability in Inertial Navigation Systems","item":"https://nmayorov.github.io/posts/ins_heading_observability/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Heading observability in Inertial Navigation Systems","name":"Heading observability in Inertial Navigation Systems","description":"It\u0026rsquo;s generally known that the heading angle in Inertial Navigation Systems (INS) is observable when the system undergoes acceleration (including turns at nonzero velocity). However if we look at the \u0026ldquo;modified error model\u0026rdquo;, it may seem that merely significantly nonzero constant velocity is sufficient. Here I want to figure out this subject using formal observability criteria and then give it intuitive physical explanation.\nINS equations in 2 dimensions To investigate heading observability, a simplified version of INS for a 2-dimensional motion is fully sufficient.","keywords":[],"articleBody":"It’s generally known that the heading angle in Inertial Navigation Systems (INS) is observable when the system undergoes acceleration (including turns at nonzero velocity). However if we look at the “modified error model”, it may seem that merely significantly nonzero constant velocity is sufficient. Here I want to figure out this subject using formal observability criteria and then give it intuitive physical explanation.\nINS equations in 2 dimensions To investigate heading observability, a simplified version of INS for a 2-dimensional motion is fully sufficient. The state is described relative to the world frame $n$ by 5 variables:\nPosition vector $r^n$ with 2 components Velocity vector $v^n$ with 2 components Heading angle $\\psi$ The state variables obey the following differential equations: $$ \\dot{r}^n = v^n \\\\ \\dot{v}^n = C^n_b f^b \\\\ \\dot{\\psi} = \\omega $$ Here $f^b$ and $\\omega$ are acceleration and (vertical) angular rate measured by IMU. And $C^n_b = R(\\psi)$ is a 2-dimensional rotation matrix computed from the heading angle: $$ R(\\alpha) \\coloneqq \\begin{bmatrix} \\cos \\alpha \u0026 -\\sin \\alpha \\\\ \\sin \\alpha \u0026 \\cos \\alpha \\end{bmatrix} $$\nThe estimates state variables we denote as $\\hat{r}, \\hat{V}, \\hat{\\psi}$\nError equations To use a linear theory we need to derived a linear system for the INS errors.\nNatural error parametrization Natural error parameters:\nPosition error: $\\Delta r = \\hat{r} - r^n$ Velocity error: $\\Delta V = \\hat{V} - V^n$ Heading error: $\\Delta \\psi = \\hat{\\psi} - \\psi$ The error equations: $$ \\Delta \\dot{r} = \\Delta v \\\\ \\Delta \\dot{v} = (\\mathcal{S} C^n_b f^b) \\Delta \\psi + C^n_b \\Delta f_b \\\\ \\Delta \\dot{\\psi} = \\Delta \\omega $$ With\n$\\Delta f^b$ and $\\Delta \\omega$ – accelerometer and angular rate measurement errors $S \\coloneqq \\begin{bmatrix} 0 \u0026 -1 \\\\ 1 \u0026 0 \\end{bmatrix}$ Modified error parametrization Here the velocity error is measured relative to the “platform frame” (where accelerometer readings are projected): $$ \\delta v = \\hat{v} - R(\\Delta \\psi) v^n \\approx \\Delta v - (\\mathcal{S} v^n) \\Delta \\psi $$\nThe error equations: $$ \\Delta \\dot{r} = \\delta v + (\\mathcal{S} v^n) \\Delta \\psi \\\\ \\delta \\dot{v} = -(S v^n) \\Delta \\omega + C^n_b \\Delta f^b \\\\ \\Delta \\dot{\\psi} = \\Delta \\omega $$\nObservability analysis Let’s assume that velocity measurements in the world frame are available (like from GNSS). From the standard error model we see that the heading error is coupled into the velocity error when there is acceleration. Thus we may assume that the heading is observable only when the vehicle undergoes acceleration.\nOn the other hand, if we consider the modified error model, the heading error is coupled into the true velocity error as $$ \\Delta v = \\delta v + (\\mathcal{S} v^n) \\Delta \\psi $$ And in the similar fashion into the position error growth. Thus it looks like that the heading may be observable from the velocity measurements when the velocity is nonzero.\nThese two conclusions contradict each other and therefore we want to carry out a formal observability analysis. To do that for a time-invariant linear system with $n$ variables with the system matrix $F$ and the observation matrix $H$ one should check the rank of the matrix: $$ M = \\begin{bmatrix} H \\\\ H F \\\\ \\cdots \\\\ H F^{n-1} \\end{bmatrix} $$ For a fully observable system this matrix must have $n$ linearly independent rows.\nTo use this result we must consider a time-invariant system for the INS errors with constant heading and velocity/acceleration. For simplicity we assume $\\psi = 0$ and error-free inertial measurements.\nStandard error model with constant acceleration We can exclude the position error variables as irrelevant. Then write the error model componentwise: $$ \\Delta \\dot{v}_1 = -f_2 \\Delta \\psi \\\\ \\Delta \\dot{v}_2 = f_1 \\Delta \\psi \\\\ \\Delta \\dot{\\psi} = 0 $$ The velocity error components are observed: $$ z_1 = \\Delta v_1 \\\\ z_2 = \\Delta v_2 $$ Thus we have the following matrices: $$ F = \\begin{bmatrix} 0 \u0026 0 \u0026 -f_2 \\\\ 0 \u0026 0 \u0026 f_1 \\\\ 0 \u0026 0 \u0026 0 \\end{bmatrix} \\\\ H = \\begin{bmatrix} 1 \u0026 0 \u0026 0 \\\\ 0 \u0026 1 \u0026 0 \\end{bmatrix} $$ The observability test matrix (the first 4 rows): $$ M = \\begin{bmatrix} 1 \u0026 0 \u0026 0 \\\\ 0 \u0026 1 \u0026 0 \\\\ 0 \u0026 0 \u0026 -f_2 \\\\ 0 \u0026 0 \u0026 f_1 \\end{bmatrix} $$ We can clearly see that when $f \\neq 0$ the system is fully observable. That is the velocity components and the heading angle will be determined exactly if there is no noise in the system.\nModified error model with constant velocity The error equations: $$ \\delta \\dot{v}_1 = 0 \\\\ \\delta \\dot{v}_2 = 0 \\\\ \\Delta \\dot{\\psi} = 0 $$ The full velocity error are observed: $$ z_1 = \\delta v_1 - v_2 \\Delta \\psi \\\\ z_2 = \\delta v_2 + v_1 \\Delta \\psi $$ The system and observations matrices: $$ F = \\begin{bmatrix} 0 \u0026 0 \u0026 0 \\\\ 0 \u0026 0 \u0026 0 \\\\ 0 \u0026 0 \u0026 0 \\end{bmatrix} \\\\ H = \\begin{bmatrix} 1 \u0026 0 \u0026 -v_2 \\\\ 0 \u0026 1 \u0026 v_1 \\end{bmatrix} $$ With $F$ being zero it is obvious that the system is not fully observable. Only the two linear combinations as expressed by $z_1$ and $z_2$ are observable.\nIf we add measurements of the velocity in the body frame (by radar or odometer): $$ z_3 = \\delta v_1 \\\\ z_4 = \\delta v_2 $$ We get the observation matrix $$ H = \\begin{bmatrix} 1 \u0026 0 \u0026 -v_2 \\\\ 0 \u0026 1 \u0026 v_1 \\\\ 1 \u0026 0 \u0026 0 \\\\ 0 \u0026 1 \u0026 0 \\end{bmatrix} $$ It has 3 independent rows as long $v \\neq 0$. That is the system is fully observable when there is GNSS and odometer measurements are available and the speed is not zero.\nDiscussion For GNSS aides INS, the heading is observable only when the system undergoes accelerations. With the constant nonzero velocity the heading error is coupled into position error growth (or “true” velocity errors), however there is no way to separate the heading error and the “odometric” velocity errors. If body velocity measurements are added, then the system becomes fully observable.\nThese results can be understood using the following principle: heading angle is observed by matching the same nonzero vector measured in the body and the world frames.\nThe acceleration vector is measured in the body frame by IMU and in the world frame it can be inferred by differentiation of the measured velocity. Only in a navigation filter it is done implicitly, but the core principle is as stated. If there is no acceleration, there is no vector to match and heading estimation is impossible.\nIf there are velocity measurements in the body frame, they can be matched with velocity measurements in the world frame and the heading is estimated from that. Again, in real systems it is done implicitly by means of a Kalman filter of some sort. In practice it means that velocity measurements in the body frame (along with GNSS velocity) are useful to enhance heading estimation.\n","wordCount":"1176","inLanguage":"en","datePublished":"2023-04-02T00:00:00Z","dateModified":"2023-04-02T00:00:00Z","author":{"@type":"Person","name":"Nikolay Mayorov"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nmayorov.github.io/posts/ins_heading_observability/"},"publisher":{"@type":"Organization","name":"Navigating Uncertainty","logo":{"@type":"ImageObject","url":"https://nmayorov.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nmayorov.github.io accesskey=h title="Navigating Uncertainty (Alt + H)">Navigating Uncertainty</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nmayorov.github.io/archives title="All posts"><span>All posts</span></a></li><li><a href=https://nmayorov.github.io/tags title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://nmayorov.github.io>Home</a>&nbsp;»&nbsp;<a href=https://nmayorov.github.io/posts/>Posts</a></div><h1 class=post-title>Heading observability in Inertial Navigation Systems</h1><div class=post-meta><span title='2023-04-02 00:00:00 +0000 UTC'>April 2, 2023</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Nikolay Mayorov</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#ins-equations-in-2-dimensions aria-label="INS equations in 2 dimensions">INS equations in 2 dimensions</a></li><li><a href=#error-equations aria-label="Error equations">Error equations</a><ul><li><a href=#natural-error-parametrization aria-label="Natural error parametrization">Natural error parametrization</a></li><li><a href=#modified-error-parametrization aria-label="Modified error parametrization">Modified error parametrization</a></li></ul></li><li><a href=#observability-analysis aria-label="Observability analysis">Observability analysis</a><ul><li><a href=#standard-error-model-with-constant-acceleration aria-label="Standard error model with constant acceleration">Standard error model with constant acceleration</a></li><li><a href=#modified-error-model-with-constant-velocity aria-label="Modified error model with constant velocity">Modified error model with constant velocity</a></li></ul></li><li><a href=#discussion aria-label=Discussion>Discussion</a></li></ul></div></details></div><div class=post-content><p>It&rsquo;s generally known that the heading angle in Inertial Navigation Systems (INS) is observable when the system undergoes acceleration (including turns at nonzero velocity).
However if we look at the <a href=https://nmayorov.github.io/posts/ins_error_equations/#modified-phi-vector-error-model>&ldquo;modified error model&rdquo;</a>,
it may seem that merely significantly nonzero constant velocity is sufficient.
Here I want to figure out this subject using formal observability criteria and then give it intuitive physical explanation.</p><h1 id=ins-equations-in-2-dimensions>INS equations in 2 dimensions<a hidden class=anchor aria-hidden=true href=#ins-equations-in-2-dimensions>#</a></h1><p>To investigate heading observability, a simplified version of INS for a 2-dimensional motion is fully sufficient.
The state is described relative to the world frame $n$ by 5 variables:</p><ul><li>Position vector $r^n$ with 2 components</li><li>Velocity vector $v^n$ with 2 components</li><li>Heading angle $\psi$</li></ul><p>The state variables obey the following differential equations:
$$
\dot{r}^n = v^n \\
\dot{v}^n = C^n_b f^b \\
\dot{\psi} = \omega
$$
Here $f^b$ and $\omega$ are acceleration and (vertical) angular rate measured by IMU.
And $C^n_b = R(\psi)$ is a 2-dimensional rotation matrix computed from the heading angle:
$$
R(\alpha) \coloneqq \begin{bmatrix}
\cos \alpha & -\sin \alpha \\
\sin \alpha & \cos \alpha
\end{bmatrix}
$$</p><p>The estimates state variables we denote as $\hat{r}, \hat{V}, \hat{\psi}$</p><h1 id=error-equations>Error equations<a hidden class=anchor aria-hidden=true href=#error-equations>#</a></h1><p>To use a linear theory we need to derived a linear system for the INS errors.</p><h2 id=natural-error-parametrization>Natural error parametrization<a hidden class=anchor aria-hidden=true href=#natural-error-parametrization>#</a></h2><p>Natural error parameters:</p><ul><li>Position error: $\Delta r = \hat{r} - r^n$</li><li>Velocity error: $\Delta V = \hat{V} - V^n$</li><li>Heading error: $\Delta \psi = \hat{\psi} - \psi$</li></ul><p>The error equations:
$$
\Delta \dot{r} = \Delta v \\
\Delta \dot{v} = (\mathcal{S} C^n_b f^b) \Delta \psi + C^n_b \Delta f_b \\
\Delta \dot{\psi} = \Delta \omega
$$
With</p><ul><li>$\Delta f^b$ and $\Delta \omega$ &ndash; accelerometer and angular rate measurement errors</li><li>$S \coloneqq \begin{bmatrix} 0 & -1 \\ 1 & 0 \end{bmatrix}$</li></ul><h2 id=modified-error-parametrization>Modified error parametrization<a hidden class=anchor aria-hidden=true href=#modified-error-parametrization>#</a></h2><p>Here the velocity error is measured relative to the &ldquo;platform frame&rdquo; (where accelerometer readings are projected):
$$
\delta v = \hat{v} - R(\Delta \psi) v^n \approx \Delta v - (\mathcal{S} v^n) \Delta \psi
$$</p><p>The error equations:
$$
\Delta \dot{r} = \delta v + (\mathcal{S} v^n) \Delta \psi \\
\delta \dot{v} = -(S v^n) \Delta \omega + C^n_b \Delta f^b \\
\Delta \dot{\psi} = \Delta \omega
$$</p><h1 id=observability-analysis>Observability analysis<a hidden class=anchor aria-hidden=true href=#observability-analysis>#</a></h1><p>Let&rsquo;s assume that velocity measurements in the world frame are available (like from GNSS).
From the standard error model we see that the heading error is coupled into the velocity error when there is acceleration.
Thus we may assume that the heading is observable only when the vehicle undergoes acceleration.</p><p>On the other hand, if we consider the modified error model, the heading error is coupled into the true velocity error as
$$
\Delta v = \delta v + (\mathcal{S} v^n) \Delta \psi
$$
And in the similar fashion into the position error growth.
Thus it looks like that the heading may be observable from the velocity measurements when the velocity is nonzero.</p><p>These two conclusions contradict each other and therefore we want to carry out a formal observability analysis.
To do that for a time-invariant linear system with $n$ variables with the system matrix $F$ and the observation matrix $H$ one should check the rank of the matrix:
$$
M = \begin{bmatrix}
H \\
H F \\
\cdots \\
H F^{n-1}
\end{bmatrix}
$$
For a fully observable system this matrix must have $n$ linearly independent rows.</p><p>To use this result we must consider a time-invariant system for the INS errors with constant heading and velocity/acceleration.
For simplicity we assume $\psi = 0$ and error-free inertial measurements.</p><h2 id=standard-error-model-with-constant-acceleration>Standard error model with constant acceleration<a hidden class=anchor aria-hidden=true href=#standard-error-model-with-constant-acceleration>#</a></h2><p>We can exclude the position error variables as irrelevant.
Then write the error model componentwise:
$$
\Delta \dot{v}_1 = -f_2 \Delta \psi \\
\Delta \dot{v}_2 = f_1 \Delta \psi \\
\Delta \dot{\psi} = 0
$$
The velocity error components are observed:
$$
z_1 = \Delta v_1 \\
z_2 = \Delta v_2
$$
Thus we have the following matrices:
$$
F = \begin{bmatrix}
0 & 0 & -f_2 \\
0 & 0 & f_1 \\
0 & 0 & 0
\end{bmatrix} \\
H = \begin{bmatrix}
1 & 0 & 0 \\
0 & 1 & 0
\end{bmatrix}
$$
The observability test matrix (the first 4 rows):
$$
M = \begin{bmatrix}
1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & -f_2 \\
0 & 0 & f_1
\end{bmatrix}
$$
We can clearly see that when $f \neq 0$ the system is fully observable.
That is the velocity components and the heading angle will be determined exactly if there is no noise in the system.</p><h2 id=modified-error-model-with-constant-velocity>Modified error model with constant velocity<a hidden class=anchor aria-hidden=true href=#modified-error-model-with-constant-velocity>#</a></h2><p>The error equations:
$$
\delta \dot{v}_1 = 0 \\
\delta \dot{v}_2 = 0 \\
\Delta \dot{\psi} = 0
$$
The full velocity error are observed:
$$
z_1 = \delta v_1 - v_2 \Delta \psi \\
z_2 = \delta v_2 + v_1 \Delta \psi
$$
The system and observations matrices:
$$
F = \begin{bmatrix}
0 & 0 & 0 \\
0 & 0 & 0 \\
0 & 0 & 0
\end{bmatrix} \\
H = \begin{bmatrix}
1 & 0 & -v_2 \\
0 & 1 & v_1
\end{bmatrix}
$$
With $F$ being zero it is obvious that the system is not fully observable.
Only the two linear combinations as expressed by $z_1$ and $z_2$ are observable.</p><p>If we add measurements of the velocity in the body frame (by radar or odometer):
$$
z_3 = \delta v_1 \\
z_4 = \delta v_2
$$
We get the observation matrix
$$
H = \begin{bmatrix}
1 & 0 & -v_2 \\
0 & 1 & v_1 \\
1 & 0 & 0 \\
0 & 1 & 0
\end{bmatrix}
$$
It has 3 independent rows as long $v \neq 0$.
That is the system is fully observable when there is GNSS and odometer measurements are available and the speed is not zero.</p><h1 id=discussion>Discussion<a hidden class=anchor aria-hidden=true href=#discussion>#</a></h1><p>For GNSS aides INS, the heading is observable only when the system undergoes accelerations.
With the constant nonzero velocity the heading error is coupled into position error growth (or &ldquo;true&rdquo; velocity errors), however there is no way to separate the heading error and the &ldquo;odometric&rdquo; velocity errors.
If body velocity measurements are added, then the system becomes fully observable.</p><p>These results can be understood using the following principle: heading angle is observed by matching the same nonzero vector measured in the body and the world frames.</p><p>The acceleration vector is measured in the body frame by IMU and in the world frame it can be inferred by differentiation of the measured velocity.
Only in a navigation filter it is done implicitly, but the core principle is as stated.
If there is no acceleration, there is no vector to match and heading estimation is impossible.</p><p>If there are velocity measurements in the body frame, they can be matched with velocity measurements in the world frame and the heading is estimated from that.
Again, in real systems it is done implicitly by means of a Kalman filter of some sort.
In practice it means that velocity measurements in the body frame (along with GNSS velocity) are useful to enhance heading estimation.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://nmayorov.github.io>Navigating Uncertainty</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>